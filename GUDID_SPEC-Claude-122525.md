# GUDID 系統技術規格書

## 完整技術規格文件

---

## 1. 專案概述

### 1.1 專案背景

本技術規格書基於全球唯一器材識別資料庫(GUDID)系統需求規格書(SRS),針對10個核心應用案例,提供完整的技術實作規格。本系統旨在建立智能化醫療器材管理平台,透過AI技術提升資料品質、強化監管效能,並促進國際資料互通。

### 1.2 適用範圍

本規格涵蓋以下10個應用案例:
1. 自然語言處理(NLP)智能分析
2. 異常資料偵測與標記
3. 重複資料智能檢測
4. 標籤資訊自動比對
5. 資料標準化與正規化
6. 不良事件智能連結
7. 產品回收追蹤管理
8. 電子化使用說明書(eIFU)
9. 海關進出口智能查驗
10. 國際資料庫連結與同步

### 1.3 文件目的

本文件提供開發團隊、測試團隊、維運團隊及專案相關人員完整的技術實作指引,確保系統開發符合業務需求與技術標準。

---

## 2. 系統架構設計

### 2.1 整體架構原則

系統採用微服務架構(Microservices Architecture),遵循以下設計原則:

**2.1.1 服務獨立性**
- 每個應用案例作為獨立微服務
- 服務間透過API Gateway通訊
- 採用事件驅動架構(Event-Driven Architecture)
- 實作斷路器模式(Circuit Breaker Pattern)

**2.1.2 可擴展性**
- 水平擴展優先設計
- 無狀態服務設計
- 容器化部署支援動態擴展
- 負載平衡跨多個實例

**2.1.3 高可用性**
- 多區域部署(Multi-AZ)
- 自動故障轉移
- 健康檢查與自我修復
- 災難復原機制

**2.1.4 安全性**
- 零信任安全模型(Zero Trust)
- 端到端加密
- 最小權限原則
- 安全開發生命週期(SDLC)

### 2.2 技術堆疊選擇

#### 2.2.1 前端技術

**Web應用框架:**
- 主框架:Streamlit(快速原型開發)
- 生產環境:React.js 18+ with TypeScript
- 狀態管理:Redux Toolkit
- UI組件庫:Material-UI(MUI)v5
- 圖表視覺化:Apache ECharts、D3.js

**響應式設計:**
- CSS框架:Tailwind CSS
- 移動優先設計(Mobile-First)
- 支援PWA(Progressive Web App)

**無障礙支援:**
- ARIA標籤完整實作
- 鍵盤導航支援
- 螢幕閱讀器相容
- 色彩對比符合WCAG 2.1 AA標準

#### 2.2.2 後端技術

**應用層:**
- 主要語言:Python 3.10+
- Web框架:FastAPI(高效能異步框架)
- 任務佇列:Celery with Redis
- API文件:OpenAPI 3.0自動生成

**AI/ML框架:**
- 深度學習:PyTorch 2.0、TensorFlow 2.x
- NLP模型:Hugging Face Transformers
- 繁體中文支援:CKIP、台大中文斷詞系統
- 模型服務:TorchServe、TensorFlow Serving
- 實驗追蹤:MLflow、Weights & Biases

**資料處理:**
- 批次處理:Apache Spark
- 串流處理:Apache Kafka Streams
- ETL工具:Apache Airflow
- 資料驗證:Great Expectations

#### 2.2.3 資料庫層

**關聯式資料庫:**
- 主資料庫:PostgreSQL 14+(支援JSON、全文檢索)
- 讀寫分離架構
- 連線池管理:PgBouncer
- 資料版本控制:時間旅行查詢(Temporal Tables)

**NoSQL資料庫:**
- 文件資料庫:MongoDB(非結構化資料)
- 快取層:Redis Cluster(會話、快取)
- 搜尋引擎:Elasticsearch(全文檢索、日誌分析)
- 時序資料庫:InfluxDB(監控指標)

**資料倉儲:**
- Amazon Redshift或Snowflake(大數據分析)
- 資料湖:AWS S3 + AWS Glue(原始資料儲存)

#### 2.2.4 基礎設施

**容器化:**
- 容器運行時:Docker 20+
- 編排平台:Kubernetes 1.25+
- 服務網格:Istio(進階流量管理)
- 容器映像倉庫:AWS ECR、Harbor

**CI/CD:**
- 版本控制:GitLab/GitHub
- CI/CD平台:GitLab CI、GitHub Actions
- 製品管理:Nexus Repository
- 配置管理:Ansible、Terraform

**監控與日誌:**
- 應用效能監控:New Relic、Datadog
- 日誌管理:ELK Stack(Elasticsearch、Logstash、Kibana)
- 指標收集:Prometheus + Grafana
- 分散式追蹤:Jaeger、Zipkin
- 告警系統:AlertManager + PagerDuty

---

## 3. 三種部署方案技術規格

### 3.1 部署方案一:Hugging Face Space(原型/POC)

#### 3.1.1 方案概述

此方案適用於快速原型開發、概念驗證(POC)及小規模示範,利用Hugging Face提供的免費或低成本託管服務,降低初期開發成本。

#### 3.1.2 技術架構

**運算資源:**
- CPU:2核心(免費方案)或4-8核心(付費方案)
- RAM:16GB(基本)至32GB(進階)
- GPU:選配NVIDIA T4(AI模型推論加速)
- 儲存空間:10GB(免費)至100GB(付費)

**應用框架:**
- Streamlit應用(Python)
- Gradio介面(選配,適合模型展示)
- Hugging Face Spaces SDK

**模型部署:**
- 預訓練模型:直接從Hugging Face Hub載入
- 模型大小限制:<5GB(免費方案)
- 推論模式:同步處理(即時回應)
- 模型格式:PyTorch、TensorFlow、ONNX

**資料儲存:**
- 臨時資料:Container本地儲存(重啟後消失)
- 持久化:Hugging Face Datasets(公開資料集)
- 敏感資料:不建議儲存,使用外部API連結

**網路與安全:**
- HTTPS加密連線(自動配置)
- 基本訪問控制(公開/私有空間)
- API Rate Limiting:依方案限制
- 無VPC或進階網路配置

#### 3.1.3 各案例實作規格

**案例1:NLP智能分析**
```python
技術組件:
- 模型:bert-base-chinese、xlm-roberta
- 函式庫:transformers、spaCy
- 前端:Streamlit text_area、st.dataframe
- 輸入:文字欄位(最多2000字)
- 輸出:實體標記、關聯視覺化
```

**案例2-3:異常與重複檢測**
```python
技術組件:
- 演算法:Isolation Forest、DBSCAN
- 函式庫:scikit-learn、pandas
- 前端:互動式參數調整slider
- 輸入:CSV檔案上傳(最多1000筆)
- 輸出:異常標記表格、信心度分數
```

**案例4:標籤比對**
```python
技術組件:
- OCR:EasyOCR(支援繁中)
- 影像處理:OpenCV、Pillow
- 前端:st.file_uploader(圖片)
- 輸入:JPG/PNG(最大5MB)
- 輸出:文字辨識結果、比對結果
```

**案例5:資料標準化**
```python
技術組件:
- 規則引擎:自定義Python邏輯
- 模糊比對:fuzzywuzzy
- 前端:批次上傳與下載
- 輸入:Excel/CSV檔案
- 輸出:標準化結果檔案
```

**案例6:不良事件連結**
```python
技術組件:
- NLP模型:fine-tuned BERT
- 因果推理:簡化版規則
- 前端:案例輸入表單
- 輸入:不良事件描述
- 輸出:可能關聯器材清單
```

**案例7:回收管理**
```python
技術組件:
- 通知模擬:Email模板預覽
- 前端:批次查詢介面
- 輸入:產品批號/序號
- 輸出:受影響器材清單
```

**案例8:eIFU展示**
```python
技術組件:
- QR Code生成:qrcode庫
- PDF渲染:PyPDF2
- 前端:文件檢視器
- 輸入:UDI或產品編號
- 輸出:說明書HTML/PDF
```

**案例9:海關查驗**
```python
技術組件:
- HS Code分類:簡化決策樹
- 前端:產品資訊輸入表單
- 輸入:產品描述、GMDN碼
- 輸出:建議HS Code、風險等級
```

**案例10:國際資料連結**
```python
技術組件:
- API模擬:Mock資料回應
- 術語映射:靜態對照表
- 前端:雙欄位比對介面
- 輸入:TUDID資料
- 輸出:GUDID/EUDAMED等效資料
```

#### 3.1.4 限制與注意事項

- **效能限制**:無法處理大量並發請求(建議<50併發)
- **資料隱私**:避免使用真實敏感資料
- **持久化**:定期備份重要配置與模型
- **擴展性**:無法水平擴展,僅適合展示用途
- **客製化**:網路、安全設定受限於平台

#### 3.1.5 成本估算

- 免費方案:$0/月(有資源限制)
- 付費方案:約$25-100/月(依運算資源)
- GPU加速:額外$50-200/月
- 總計POC階段:建議預算$100-300/月

---

### 3.2 部署方案二:AWS雲端架構

#### 3.2.1 方案概述

完整生產級雲端部署方案,適合正式上線運營,提供高可用性、高擴展性及完整安全合規機制。

#### 3.2.2 整體架構設計

**架構層級:**
```
使用者層 → CDN層 → 負載均衡層 → 應用層 → 服務層 → 資料層
    ↓           ↓          ↓          ↓         ↓         ↓
  終端使用者   CloudFront   ALB/NLB    ECS/EKS   Lambda   RDS/S3
```

**網路架構:**
- VPC設計:多可用區(Multi-AZ)跨三個AZ
- 子網劃分:公有子網(NAT/LB)、私有子網(App)、資料子網(DB)
- 安全群組:最小權限原則,按服務分層控制
- 網路ACL:子網層級存取控制
- VPN/Direct Connect:與地端系統安全連線

#### 3.2.3 運算服務配置

**容器服務(Amazon ECS/EKS):**
- 編排平台:EKS(Kubernetes)優先,複雜度較低可選ECS
- 運算類型:Fargate(無伺服器)或EC2(自管理節點)
- 節點規格:
  - 開發環境:t3.medium(2vCPU, 4GB RAM)
  - 生產環境:c5.xlarge(4vCPU, 8GB RAM)
  - AI推論:p3.2xlarge(1 GPU, 8vCPU, 61GB RAM)
- 自動擴展:
  - Horizontal Pod Autoscaler(CPU>70%或自定義指標)
  - Cluster Autoscaler(節點自動增減)
  - 目標:最小3個實例,最大20個實例

**無伺服器運算(AWS Lambda):**
- 用途:輕量級API、定時任務、事件觸發處理
- 執行環境:Python 3.10 Runtime
- 記憶體配置:512MB-3GB(依函式需求)
- 逾時設定:一般30秒,批次處理最多15分鐘
- 並發限制:保留併發100,總帳戶限制1000

**批次處理(AWS Batch):**
- 用途:大量資料ETL、模型訓練
- 運算環境:Spot Instances(節省成本)
- 作業佇列:高/中/低優先順序
- 與Step Functions整合編排複雜工作流

#### 3.2.4 資料服務配置

**關聯式資料庫(Amazon RDS PostgreSQL):**
- 版本:PostgreSQL 14.x
- 實例類型:
  - 開發:db.t3.medium(2vCPU, 4GB)
  - 生產:db.r5.xlarge(4vCPU, 32GB)
- 高可用性:Multi-AZ部署(同步複寫)
- 讀取副本:最多3個(跨AZ),負載分散查詢
- 儲存:
  - 類型:Provisioned IOPS SSD(io1)
  - 容量:500GB起,最大64TB
  - IOPS:10,000起
- 備份:
  - 自動備份保留期:30天
  - 快照:每日自動+手動重要節點
  - 跨區域備份複製(DR)
- 加密:
  - 靜態加密:AWS KMS
  - 傳輸加密:SSL/TLS強制連線
- 效能優化:
  - 查詢效能洞察(Performance Insights)
  - 慢查詢日誌分析
  - 索引建議

**NoSQL資料庫(Amazon DynamoDB):**
- 用途:會話管理、快取、高頻寫入資料
- 容量模式:隨需(On-Demand)或佈建(Provisioned)
- 全域表格:跨區域複寫
- DynamoDB Streams:變更資料捕捉(CDC)
- 備份:持續備份PITR(Point-in-Time Recovery)

**快取服務(Amazon ElastiCache Redis):**
- 版本:Redis 7.x
- 節點類型:cache.r6g.large(2vCPU, 13.07GB)
- 叢集模式:啟用(分片)
- 副本:每分片2個讀取副本
- 持久化:AOF啟用(防資料遺失)
- 用途:
  - 會話儲存
  - API回應快取(TTL 5-60分鐘)
  - 即時排行榜
  - 分散式鎖

**搜尋服務(Amazon OpenSearch):**
- 用途:全文檢索、日誌分析、應用監控
- 節點類型:r6g.large.search
- 叢集配置:3個主節點+6個資料節點
- 儲存:EBS(gp3)每節點500GB
- 索引策略:
  - 熱資料:UltraWarm(7天)
  - 溫資料:Warm(30天)
  - 冷資料:Cold Storage(1年)
- 快照:每日自動至S3

**物件儲存(Amazon S3):**
- 儲存類別策略:
  - 頻繁存取:S3 Standard(30天內)
  - 不頻繁存取:S3 IA(31-90天)
  - 封存:S3 Glacier(>90天)
- 生命週期政策:自動轉換與刪除
- 版本控制:啟用(防誤刪)
- 跨區域複寫:災難復原
- 加密:SSE-KMS(伺服器端加密)
- 存取控制:Bucket Policy + IAM + S3 Access Points
- 用途:
  - 原始資料湖
  - 模型檔案儲存
  - 備份歸檔
  - 靜態網站託管

#### 3.2.5 AI/ML服務配置

**模型訓練(Amazon SageMaker Training):**
- 訓練實例:ml.p3.2xlarge(GPU加速)
- 分散式訓練:Data Parallel、Model Parallel
- 自動調參:Hyperparameter Tuning Jobs
- Spot訓練:節省最多70%成本
- 實驗管理:SageMaker Experiments
- 訓練資料:S3輸入模式(Fast File或Pipe)

**模型部署(SageMaker Hosting/Inference):**
- 即時推論:
  - 端點實例:ml.c5.xlarge起
  - Multi-Model Endpoints(共享資源)
  - Auto Scaling:基於調用量
- 批次推論:
  - Batch Transform Jobs
  - Spot實例節省成本
- 邊緣部署:SageMaker Edge Manager(如適用)

**模型監控(SageMaker Model Monitor):**
- 資料品質監控:輸入資料分布變化
- 模型品質監控:預測準確度下降偵測
- 偏差偵測:Bias drift
- 特徵歸因:Explainability分析
- 告警:整合CloudWatch Alarms

**MLOps工具鏈:**
- 版本控制:SageMaker Model Registry
- CI/CD:CodePipeline + CodeBuild
- Feature Store:SageMaker Feature Store(線上/離線)
- 實驗追蹤:MLflow(自建於EC2)或SageMaker Studio

#### 3.2.6 應用服務配置

**API管理(Amazon API Gateway):**
- 類型:REST API或HTTP API(較低延遲)
- 認證:Cognito User Pools、Lambda Authorizer
- 使用量計畫:API金鑰、配額、節流
- 快取:啟用回應快取(TTL可配置)
- 監控:CloudWatch詳細指標、存取日誌
- CORS配置:跨域請求支援
- WAF整合:防護API攻擊

**身份認證(Amazon Cognito):**
- 使用者池:帳號管理、MFA、密碼政策
- 身份池:臨時AWS憑證(適合前端直連S3)
- 社群登入:選配Google、Facebook等
- SAML整合:企業SSO(如AD FS)
- Lambda觸發器:自定義認證流程
- 進階安全:風險評分、異常登入偵測

**通知服務(Amazon SNS/SES):**
- SNS:
  - 主題訂閱:Email、SMS、Lambda、SQS
  - 訊息過濾:基於屬性路由
  - 移動推送:iOS/Android整合
- SES:
  - 大量郵件發送(回收通知)
  - 範本管理
  - 追蹤:開信率、點擊率
  - 反彈與投訴處理

**工作流編排(AWS Step Functions):**
- 用途:複雜業務流程編排
- 狀態機類型:Standard(長時間)或Express(高吞吐)
- 範例流程:
  ```
  資料上傳 → 驗證 → 清洗 → AI分析 → 人工審核 → 發布
  ```
- 錯誤處理:重試、補償邏輯
- 整合服務:Lambda、Batch、SageMaker、ECS等

#### 3.2.7 安全與合規

**身份與存取管理(IAM):**
- 原則:最小權限、職責分離
- 角色設計:
  - 服務角色(ECS、Lambda)
  - 使用者角色(管理員、開發者、稽核員)
- MFA強制:所有管理操作
- 存取金鑰輪換:每90天
- 跨帳戶存取:適用於多環境管理

**網路安全:**
- AWS WAF:
  - 規則集:OWASP Top 10防護
  - Rate-based規則:DDoS防護
  - IP白名單/黑名單
  - Bot控制
- AWS Shield:
  - Standard:自動DDoS防護
  - Advanced:選配進階防護+24/7支援
- Security Groups:微分段存取控制
- Network Firewall:進階封包檢查(選配)

**資料加密:**
- 傳輸加密:
  - TLS 1.3(CloudFront、ALB)
  - VPN(IPSec)for site-to-site
- 靜態加密:
  - KMS金鑰管理
  - 自動金鑰輪換
  - CMK或AWS管理金鑰
- 金鑰存取控制:IAM政策+金鑰政策

**合規與稽核:**
- AWS Config:資源配置監控與合規檢查
- CloudTrail:所有API呼叫日誌(啟用多區域)
- GuardDuty:威脅偵測(機器學習)
- Security Hub:集中安全態勢管理
- Inspector:漏洞掃描(EC2、Container)
- Macie:敏感資料探索與保護(S3)
- Audit Manager:合規框架評估(ISO 27001、HIPAA等)

#### 3.2.8 監控與維運

**CloudWatch監控:**
- 指標收集:
  - 基礎設施指標(CPU、記憶體、磁碟)
  - 應用指標(API延遲、錯誤率)
  - 業務指標(交易量、使用者活躍度)
- 日誌管理:
  - 日誌群組:按服務分類
  - 保留期:30-365天
  - Insights查詢:快速分析
- 儀表板:即時監控視圖
- 告警:
  - 多維度告警(複合條件)
  - 通知:SNS主題→Email/SMS/PagerDuty

**X-Ray分散式追蹤:**
- 請求追蹤:端到端延遲分析
- 服務地圖:微服務依賴視覺化
- 效能瓶頸識別
- 錯誤根因分析

**備份與災難復原:**
- AWS Backup:
  - 集中備份管理
  - 備份計畫:每日/每週/每月
  - 跨區域備份複製
  - 法規遵循標籤
- DR策略:
  - RTO:<4小時
  - RPO:<1小時
  - 主動-被動(Pilot Light)架構
  - 季度DR演練

**成本優化:**
- Cost Explorer:成本分析與預測
- Budgets:預算告警
- Savings Plans:承諾使用折扣(~30-70%)
- Spot Instances:批次處理節省成本
- S3 Intelligent-Tiering:自動優化儲存成本
- Trusted Advisor:成本優化建議

#### 3.2.9 各案例AWS服務映射

| 案例 | 運算服務 | 資料服務 | AI服務 | 其他服務 |
|------|---------|---------|--------|---------|
| 案例1(NLP) | ECS/Lambda | RDS, S3 | SageMaker, Comprehend | API Gateway |
| 案例2-3(異常檢測) | Lambda, Batch | RDS, DynamoDB | SageMaker | EventBridge |
| 案例4(標籤比對) | ECS | S3, RDS | Textract, Rekognition | Step Functions |
| 案例5(標準化) | Lambda, Batch | RDS | SageMaker | Glue |
| 案例6(不良事件) | ECS | RDS, OpenSearch | SageMaker | QuickSight |
| 案例7(回收管理) | ECS, Lambda | RDS, DynamoDB | - | SNS, SES, Pinpoint |
| 案例8(eIFU) | CloudFront, S3 | RDS, S3 | - | API Gateway, Lambda@Edge |
| 案例9(海關) | ECS, Lambda | RDS, ElastiCache | SageMaker | API Gateway |
| 案例10(國際連結) | ECS, Lambda | RDS, S3 | SageMaker | EventBridge, SQS |

#### 3.2.10 部署流程

**環境劃分:**
1. 開發環境(Dev):開發人員測試
2. 測試環境(QA):整合測試、效能測試
3. 預生產環境(Staging):生產環境鏡像,最終驗證
4. 生產環境(Prod):正式上線

**CI/CD流程:**
```
開發者提交 → GitLab/GitHub → CodePipeline觸發
    ↓
單元測試(CodeBuild) → 建置容器映像 → 推送至ECR
    ↓
部署至Dev環境 → 自動化整合測試
    ↓
手動批准 → 部署至QA環境 → 回歸測試
    ↓
手動批准 → 部署至Staging → 效能測試+安全掃描
    ↓
變更審核委員會(CAB)批准 → 藍綠部署至Prod
    ↓
監控30分鐘 → 自動或手動完成切換
```

**基礎設施即程式碼(IaC):**
- Terraform:多雲支援,模組化設計
- CloudFormation:AWS原生,StackSets跨區域部署
- CDK:程式化定義基礎設施(TypeScript/Python)
- 版本控制:Git儲存庫管理
- 狀態管理:Terraform Cloud或S3 Backend

#### 3.2.11 成本估算

**月度成本估算(生產環境,中型規模):**
- 運算服務(ECS/EKS):$1,500-3,000
- RDS(Multi-AZ):$800-1,500
- ElastiCache:$300-600
- S3+資料傳輸:$500-1,000
- SageMaker(推論):$1,000-2,000
- API Gateway:$200-500
- CloudFront:$300-800
- 其他服務(監控、安全):$500-1,000
- **總計:$5,100-10,400/月**

**年度總成本(含開發、測試環境):**
- 生產環境:$61,200-124,800
- 非生產環境(30%):$18,360-37,440
- 資料傳輸與備份:$12,000-24,000
- 支援方案(Business):$3,000-10,000
- **年度總計:$94,560-196,240**

**成本優化潛力:**
- Savings Plans:節省25-35%
- Spot Instances:批次處理節省60-70%
- 儲存生命週期:節省40-60%儲存成本
- 預留實例:RDS節省40-60%
- **優化後年度成本:$60,000-130,000**

---

### 3.3 部署方案三:混合雲架構(AWS+地端)

#### 3.3.1 方案概述

結合AWS雲端彈性與地端資料中心的控制性,適合具有資料主權、合規性或既有投資考量的組織。敏感資料保留地端,運算與AI服務利用雲端。

#### 3.3.2 架構設計原則

**資料分層策略:**
- 敏感資料層:病患識別資料、商業機密→地端
- 業務資料層:匿名化醫材資料、統計資料→雲端
- 分析資料層:資料倉儲、AI訓練資料→雲端

**運算分工:**
- 地端:核心業務交易系統、敏感資料處理
- 雲端:AI推論、大數據分析、彈性擴展服務

**網路連接:**
- 主要:AWS Direct Connect(專線,低延遲,穩定)
- 備援:Site-to-Site VPN(IPSec)
- 頻寬:10Gbps Direct Connect
- 備援頻寬:1Gbps VPN

#### 3.3.3 地端基礎設施規格

**資料中心要求:**
- Tier 3+等級(99.982%可用性)
- N+1冗餘電力與冷卻
- 雙路市電+UPS+發電機
- 環境監控(溫濕度、煙霧、漏水)

**伺服器硬體:**
- 資料庫伺服器:
  - 型號:Dell PowerEdge R750或HPE ProLiant DL380 Gen10+
  - CPU:2 x Intel Xeon Gold 6330(28核心)
  - RAM:512GB DDR4 ECC
  - 儲存:4TB NVMe SSD(RAID 10)
  - 網路:2 x 25GbE
  - 數量:4台(主從複寫+備援)

- 應用伺服器:
  - 型號:Dell PowerEdge R650
  - CPU:2 x Intel Xeon Silver 4314(16核心)
  - RAM:256GB DDR4 ECC
  - 儲存:1TB SSD
  - 網路:2 x 10GbE
  - 數量:6-10台(叢集)

**儲存系統:**
- NAS/SAN:
  - 容量:100TB可用(RAID 6)
  - 效能:100,000 IOPS
  - 備份:每日增量備份至雲端(S3 Glacier)
  - 快照:每小時本地快照(保留24小時)

**網路設備:**
- 核心交換器:Cisco Nexus或Arista(40/100GbE)
- 防火牆:Palo Alto PA-5220或Fortinet FortiGate
- 負載平衡器:F5 BIG-IP或Nginx Plus
- VPN閘道:Cisco ASR 1000或pfSense高可用叢集

#### 3.3.4 混合雲整合架構

**資料同步策略:**

**即時同步(低延遲要求):**
- 技術:CDC(Change Data Capture)
- 工具:AWS Database Migration Service(DMS)
- 方向:地端PostgreSQL→AWS RDS(讀取副本)
- 延遲:<5秒
- 用途:雲端查詢與分析不影響地端效能

**批次同步(大量資料):**
- 技術:ETL
- 工具:Apache Airflow + AWS Glue
- 排程:每日凌晨2:00
- 傳輸:AWS DataSync或Snowball(初次大量)
- 壓縮與加密:傳輸中啟用

**事件驅動同步:**
- 架構:地端事件→Kafka→AWS EventBridge→Lambda處理
- 用途:回收通知、不良事件新增等即時事件
- 保證:At-least-once delivery

**服務部署分布:**

| 服務類型 | 地端 | AWS雲端 |
|---------|------|---------|
| 核心資料庫 | ✓(主) | ✓(唯讀副本) |
| 交易系統 | ✓ | - |
| AI模型訓練 | - | ✓ |
| AI模型推論 | 部分(低延遲需求) | ✓(主要) |
| 大數據分析 | - | ✓ |
| eIFU服務 | - | ✓(CloudFront+S3) |
| 監控系統 | ✓(Prometheus) | ✓(CloudWatch) |
| 備份歸檔 | ✓(短期) | ✓(長期) |

#### 3.3.5 安全架構

**網路隔離:**
- VLAN隔離:管理、生產、DMZ
- 微分段:軟體定義網路(SDN)
- 零信任:所有連線驗證,無內部隱含信任

**身份聯邦:**
- 地端:Active Directory(LDAP)
- 整合:AD FS + AWS IAM Identity Center(SSO)
- MFA:硬體Token或軟體OTP
- 權限同步:SCIM協定自動配置

**資料加密:**
- 地端至AWS:IPSec VPN + TLS 1.3(雙重加密)
- 靜態加密:
  - 地端:LUKS磁碟加密
  - 雲端:KMS
- 金鑰管理:地端HSM與AWS KMS混合架構

**合規性:**
- 資料落地:敏感資料不出境
- 稽核日誌:地端與雲端集中至SIEM
- 定期評估:每季內部稽核,年度外部稽核
- 災難復原演練:每半年一次

#### 3.3.6 各案例混合部署策略

**案例1(NLP分析):**
- 資料輸入:地端接收
- 資料去識別化:地端前處理
- AI分析:雲端(SageMaker)
- 結果儲存:地端資料庫
- 優勢:運算彈性+資料安全

**案例2-3(異常檢測):**
- 歷史資料:同步至雲端Redshift
- 模型訓練:雲端(大數據集)
- 模型部署:地端+雲端雙向
- 即時檢測:地端(低延遲)
- 批次檢測:雲端(大批量)

**案例4(標籤比對):**
- 影像上傳:地端或雲端(依使用者位置)
- OCR處理:雲端(Textract)
- 比對驗證:地端資料庫
- 結果快取:雲端ElastiCache
- 優勢:OCR服務免維護

**案例5(資料標準化):**
- 規則管理:地端
- 批次處理:雲端Batch
- 結果回寫:地端資料庫
- 優勢:運算高峰彈性擴展

**案例6(不良事件連結):**
- 不良事件資料:地端(敏感)
- 匿名化資料:同步至雲端
- AI因果分析:雲端
- 人工審核:地端介面
- 信號偵測:雲端(大規模統計分析)

**案例7(回收管理):**
- 回收資料庫:地端
- 通知服務:雲端(SNS/SES)
- 追蹤分析:雲端
- 緊急通知:地端備援路徑
- 優勢:關鍵資料本地+通訊穩定

**案例8(eIFU):**
- 說明書內容管理:地端
- CDN分發:雲端(CloudFront)
- 全球存取:雲端(低延遲)
- 版本控管:地端
- 優勢:全球快速存取

**案例9(海關查驗):**
- 報關資料:地端
- AI分類:雲端
- 即時驗證:地端API
- 統計分析:雲端
- 優勢:關鍵業務本地+智能分析雲端

**案例10(國際連結):**
- TUDID主資料:地端
- 國際API整合:雲端(API Gateway)
- 資料轉換:雲端Lambda
- 映射快取:雲端ElastiCache
- 優勢:國際頻寬優化

#### 3.3.7 災難復原策略

**地端故障:**
- 自動偵測:30秒內
- 流量切換:DNS切換至AWS(TTL 60秒)
- 雲端接管:唯讀副本升級為主(RDS)
- 完整恢復:AWS臨時擴展為完整系統
- RTO:<2小時

**雲端故障:**
- Direct Connect斷線:自動切換VPN
- 區域故障:切換至備援區域
- 地端接管:雲端服務臨時停用
- 核心功能:地端維持運作
- RTO:<30分鐘(核心功能)

**雙向故障(極端情況):**
- 降級服務:唯讀模式
- 離線緩存:關鍵查詢功能
- 手動處理:核心業務流程
- 異地備援:啟動第三方備援點

#### 3.3.8 效能優化

**延遲優化:**
- Direct Connect延遲:<10ms(同城)
- 資料預取:預測性快取
- 邊緣運算:地端處理延遲敏感請求
- 壓縮:資料傳輸啟用壓縮(節省30-50%頻寬)

**頻寬管理:**
- QoS設定:關鍵業務優先
- 流量整形:限制非關鍵業務頻寬
- 離峰同步:大批資料傳輸排程於夜間
- 監控:NetFlow分析流量模式

**快取策略:**
- 多層快取:
  - L1:應用內快取(記憶體)
  - L2:地端Redis
  - L3:雲端ElastiCache
- TTL設定:依資料變動頻率
- 快取預熱:系統啟動時預載熱資料

#### 3.3.9 維運管理

**集中監控:**
- 工具:Prometheus(地端)+ CloudWatch(雲端)→Grafana統一儀表板
- 指標收集:
  - 地端:Node Exporter、cAdvisor
  - 雲端:CloudWatch Agent
  - 應用:APM(如New Relic)
- 告警整合:PagerDuty統一告警

**日誌管理:**
- 地端:ELK Stack本地部署
- 雲端:CloudWatch Logs
- 整合:Fluentd轉發至集中Elasticsearch
- 保留:地端30天,雲端長期歸檔

**配置管理:**
- 工具:Ansible(自動化配置)
- 版本控制:GitLab
- 審核:變更需Pull Request審核
- 回滾:自動化回滾腳本

**補丁管理:**
- 地端:WSUS(Windows)、apt/yum(Linux)
- 雲端:Systems Manager Patch Manager
- 測試:先於測試環境驗證
- 排程:每月第二個週六凌晨

#### 3.3.10 成本分析

**地端一次性成本:**
- 伺服器硬體:$150,000-250,000
- 儲存系統:$100,000-200,000
- 網路設備:$50,000-100,000
- 機房設施(如需新建):$200,000-500,000
- **一次性總計:$500,000-1,050,000**

**地端年度營運成本:**
- 電力與冷卻:$30,000-50,000
- 機房租賃(如適用):$40,000-80,000
- 維護合約:$40,000-70,000
- 人員(假設2名專職):$150,000-250,000
- **年度營運:$260,000-450,000**

**AWS年度成本(混合模式):**
- Direct Connect:$12,000-24,000
- 雲端服務(約原方案50%):$30,000-65,000
- 資料傳輸:$6,000-12,000
- **AWS年度:$48,000-101,000**

**總擁有成本(TCO)三年:**
- 初期投資:$500,000-1,050,000
- 營運三年:$780,000-1,350,000
- AWS三年:$144,000-303,000
- **三年總計:$1,424,000-2,703,000**
- **平均年度:$474,667-901,000**

**比較:**
- 純AWS三年:$180,000-390,000(優化後)
- 混合雲三年:$1,424,000-2,703,000
- **混合雲額外成本:主要來自地端硬體與人員**
- **適用情境:資料主權、合規要求、大量交易無法上雲**

---

## 4. 各應用案例詳細技術規格

### 4.1 案例1:NLP智能分析

#### 4.1.1 功能規格

**輸入:**
- 格式:文字(UTF-8)、Word文檔、PDF
- 長度:單筆最多10,000字元
- 批次:最多1,000筆/次
- 語言:繁體中文、簡體中文、英文、日文

**處理流程:**
1. 文字預處理:斷詞、去除停用詞、正規化
2. 實體識別(NER):器材名稱、廠商、型號、適應症、材質
3. 關係抽取:器材與適應症關係、器材與風險關係
4. 分類:器材類別、風險等級
5. 情感分析:不良事件描述情緒分析(選配)

**輸出:**
- JSON格式結構化資料
- 視覺化標記(Web介面)
- 信心度分數(0-1)
- 低信心度(<0.7)標記人工審核
- 批次結果匯出Excel

#### 4.1.2 AI模型規格

**模型架構:**
- Base Model:BERT-base-chinese或XLM-RoBERTa
- Fine-tuning:醫療器材領域資料集
- 訓練資料量:最少10,000筆標註資料
- 標註工具:Label Studio或Doccano
- 實體類別:15-20個(可擴充)

**效能指標:**
- NER準確率(F1):`>85%`
- 關係抽取準確率:`>80%`
- 推論速度:單筆<500ms
- 批次處理:>100筆/分鐘

**模型更新:**
- 主動學習:低信心度樣本優先標註
- 增量訓練:每月新增資料再訓練
- A/B測試:新模型與舊模型並行7天
- 版本管理:保留最近5個版本

#### 4.1.3 技術元件

**斷詞引擎:**
- 繁體中文:CKIP、Jieba(繁中模式)
- 簡體中文:Jieba、THULAC
- 英文:spaCy
- 自定義詞典:醫療器材術語庫(持續更新)

**術語庫:**
- 來源:TUDID現有資料、GMDN、SNOMED CT
- 規模:50,000+詞條
- 格式:同義詞映射、階層關係
- 更新:季度更新,API訂閱國際標準

**後處理:**
- 規則修正:已知錯誤模式修正
- 一致性檢查:同文檔實體一致性
- 去重合併:相同實體合併

#### 4.1.4 部署規格

**Hugging Face版本:**
- 模型大小:<500MB(量化壓縮)
- 記憶體需求:4GB
- CPU推論:可行但較慢(~2秒/筆)
- 限制:僅示範功能,無批次處理

**AWS版本:**
- SageMaker端點:ml.g4dn.xlarge(1 GPU)
- Auto Scaling:2-10實例
- 模型:完整版未量化
- API Gateway:RESTful,支援批次
- Lambda前處理:文件轉文字

**混合雲版本:**
- 地端:核心交易即時分析(低延遲)
- 雲端:大批量資料分析(夜間)
- 模型同步:每週同步最新模型至地端

---

### 4.2 案例2-3:異常與重複檢測

#### 4.2.1 功能規格

**異常檢測類型:**
- 統計異常:數值欄位超出3σ範圍
- 模式異常:與歷史模式不符(如突然的類別變更)
- 完整性異常:必填欄位缺失、格式錯誤
- 邏輯異常:欄位間邏輯矛盾(如尺寸與重量不符)
- 時序異常:更新頻率異常

**重複檢測方法:**
- 精確重複:關鍵欄位完全相同
- 模糊重複:相似度>0.9(編輯距離、Jaccard相似度)
- 語意重複:描述文字意思相同(NLP)
- 多欄位組合:加權相似度計算

**參數配置:**
- 敏感度調整:高/中/低(預設中)
- 自定義規則:使用者可新增業務規則
- 白名單:已確認的例外案例
- 閾值調整:各類型檢測閾值可調

#### 4.2.2 AI模型規格

**異常檢測模型:**
- 無監督學習:Isolation Forest、One-Class SVM
- 深度學習:Autoencoder(重構誤差)
- 集成方法:多模型投票
- 訓練資料:歷史正常資料(無需異常標籤)

**重複檢測模型:**
- Siamese Network:雙塔模型計算相似度
- 訓練資料:標註的重複/非重複對(最少5,000對)
- 特徵工程:
  - 文字:TF-IDF、BERT embeddings
  - 數值:標準化、離散化
  - 類別:One-hot encoding

**效能指標:**
- 異常檢測召回率:`>90%`(不漏報)
- 誤報率:`<10%`(減少人工負擔)
- 重複檢測準確率:`>95%`
- 處理速度:>1,000筆/分鐘

#### 4.2.3 工作流整合

**檢測流程:**
```
新資料登載 → 即時快速檢測(基本規則) → 入庫
           ↓
定時批次檢測(AI模型,每2小時) → 異常清單
           ↓
人工審核儀表板 → 確認/忽略/修正
           ↓
回饋模型(強化學習) → 模型自動改進
```

**審核機制:**
- 優先級排序:高風險異常優先
- 批次審核:一次審核相似異常
- 快捷操作:常見處理動作快捷鍵
- 審核歷史:追蹤審核決策

#### 4.2.4 部署規格

**Hugging Face版本:**
- 演算法:輕量級(Isolation Forest)
- 資料量限制:<10,000筆
- 即時分析:單筆上傳即時回饋
- 視覺化:異常分數分布圖

**AWS版本:**
- Lambda:規則檢測(即時,<1秒)
- Batch:AI模型批次檢測(定時)
- DynamoDB:異常案例儲存(快速查詢)
- Step Functions:編排檢測→審核→回饋流程

**混合雲版本:**
- 地端:即時交易檢測(規則為主)
- 雲端:深度AI分析(批次)
- 同步:異常案例每日同步至雲端訓練

---

### 4.3 案例4:標籤資訊自動比對

#### 4.3.1 功能規格

**輸入類型:**
- 影像:JPG、PNG、TIFF(最大20MB)
- 文件:PDF(多頁支援)
- 解析度:最低300 DPI建議
- 條碼:1D(Code 128、GS1-128)、2D(QR Code、Data Matrix)

**辨識內容:**
- 文字資訊:產品名稱、型號、批號、效期、製造商
- 條碼/QR Code:UDI-DI、UDI-PI
- 符號:CE Mark、FDA Logo、警告符號
- 多語言:繁中、英文、日文

**比對邏輯:**
- 資料庫查詢:UDI反查產品資訊
- 一致性檢查:標籤文字與資料庫比對
- 格式驗證:UDI格式、效期格式
- 警示:不一致項目標紅

**輸出:**
- 比對報告:各欄位一致性狀態
- 差異標記:視覺化標記不一致處
- 信心度:OCR辨識信心度
- 建議:可能的修正建議

#### 4.3.2 技術元件

**OCR引擎:**
- 雲端:AWS Textract(高準確度)
- 開源:EasyOCR、PaddleOCR(備援)
- 繁中優化:台灣正體字型訓練
- 後處理:拼寫檢查、上下文修正

**條碼解碼:**
- 函式庫:ZBar、pyzbar
- 支援標準:ISO/IEC 15417、ISO/IEC 16022、GS1標準
- 容錯:支援部分損壞條碼(Reed-Solomon)
- 多重偵測:單張影像多個條碼

**影像前處理:**
- 去噪:中值濾波、高斯模糊
- 二值化:自適應閾值
- 旋轉矯正:Hough變換
- 透視矯正:四點透視變換
- 增強:直方圖均衡化

**比對演算法:**
- 精確比對:字串完全匹配
- 模糊比對:Levenshtein距離<3
- 語意比對:BERT相似度>0.85
- 規則比對:正則表達式驗證格式

#### 4.3.3 效能指標

- OCR準確率:`>95%`(清晰影像)
- 條碼識別率:`>98%`
- 處理速度:單張<3秒
- 批次處理:>500張/小時
- 低品質影像:>80%成功率(模糊、傾斜)

#### 4.3.4 部署規格

**Hugging Face版本:**
- 限制:單張影像,最大5MB
- OCR:EasyOCR(CPU)
- 比對:簡化規則
- 展示:上傳後顯示標記結果

**AWS版本:**
- S3:影像上傳儲存
- Textract:OCR處理
- Lambda:比對邏輯
- Step Functions:批次處理編排
- SNS:完成通知

**混合雲版本:**
- 上傳:地端或雲端(視使用者位置)
- OCR:雲端Textract(準確度優先)
- 比對:地端資料庫(低延遲)
- 快取:雲端快取常見產品(減少查詢)

---

### 4.4 案例5:資料標準化與正規化

#### 4.4.1 功能規格

**標準化範疇:**
- 器材名稱:別名統一、大小寫一致
- 廠商名稱:法定名稱統一
- 度量單位:公制轉換、符號統一
- 地址:格式標準化(郵遞區號、縣市區)
- 日期時間:ISO 8601格式
- 分類代碼:GMDN、UMDNS統一

**正規化流程:**
1. 資料清洗:去除特殊字元、多餘空白
2. 格式統一:套用標準格式規則
3. 映射轉換:別名→標準名稱
4. 單位轉換:英制→公制
5. 驗證:標準規則驗證
6. 標記:無法自動處理項目標記

**規則管理:**
- 規則庫:可擴充的規則集
- 版本控制:規則版本追蹤
- 優先級:規則衝突時優先級
- 審核:新規則需審核批准

**例外處理:**
- 人工介入:複雜案例標記
- 多選項:提供候選標準值
- 學習機制:人工決策回饋模型
- 白名單:合法的非標準值

#### 4.4.2 AI模型規格

**模型類型:**
- 實體連結(Entity Linking):將文字映射至標準實體
- 序列到序列(Seq2Seq):自動格式轉換
- 分類模型:判斷適用標準類別

**訓練資料:**
- 歷史對照表:人工標準化案例
- 外部資源:GMDN資料庫、公司登記資料
- 資料增強:同義詞替換、格式變異

**效能指標:**
- 自動標準化率:`>70%`(免人工)
- 準確率:`>90%`(自動處理部分)
- 處理速度:>5,000筆/分鐘

#### 4.4.3 技術元件

**規則引擎:**
- 框架:Python re模組、Drools(複雜規則)
- 規則格式:YAML配置檔
- 動態載入:規則更新免重啟
- 測試:規則單元測試覆蓋

**映射資料庫:**
- 儲存:PostgreSQL(關聯查詢)
- 索引:全文檢索索引(GIN)
- 快取:Redis(熱門映射)
- 更新:API新增映射關係

**單位轉換:**
- 函式庫:Pint(Python單位庫)
- 支援:長度、重量、體積、溫度
- 精度:小數點後2位
- 範圍檢查:合理性驗證

#### 4.4.4 部署規格

**Hugging Face版本:**
- 上傳:CSV檔案(最多1,000筆)
- 處理:基本規則+簡單AI
- 下載:標準化結果CSV
- 報告:處理統計與例外清單

**AWS版本:**
- S3:檔案上傳/下載
- Batch:大批量處理(數萬筆)
- Glue:ETL作業整合
- SageMaker:AI模型推論
- Athena:結果查詢分析

**混合雲版本:**
- 規則引擎:地端(低延遲)
- AI模型:雲端(複雜模型)
- 映射庫:地端主庫,雲端同步副本
- 大批量:雲端處理,結果回傳

---

### 4.5 案例6:不良事件智能連結

#### 4.5.1 功能規格

**輸入資料:**
- 不良事件報告:患者描述、臨床表現、時間軸
- 器材資訊:品牌、型號、使用時長
- 患者資訊:年齡、性別、病史(去識別化)
- 醫療處置:治療措施、結果

**分析維度:**
- 因果關聯:器材與事件因果可能性
- 相似案例:歷史相似事件
- 信號偵測:統計異常模式(PRR、ROR)
- 風險評分:事件嚴重度與發生機率

**輸出:**
- 關聯器材清單:機率排序
- 因果分析報告:支持/反對證據
- 相似案例:前10個相似案例
- 建議行動:是否需深入調查、回收評估
- 視覺化:時間趨勢圖、地理分布

#### 4.5.2 AI模型規格

**NLP模型(文本理解):**
- Base Model:BioBERT(醫學領域)
- Fine-tuning:不良事件報告資料集
- 任務:症狀提取、嚴重度分類
- 訓練量:最少5,000筆標註報告

**因果推理模型:**
- 方法:Bayesian Network、Causal Forest
- 特徵:時序關係、劑量反應、排除其他原因
- 解釋性:提供因果路徑
- 驗證:醫學專家審核

**信號偵測:**
- 演算法:
  - PRR(Proportional Reporting Ratio)
  - ROR(Reporting Odds Ratio)
  - BCPNN(Bayesian Confidence Propagation Neural Network)
  - GPS(Gamma Poisson Shrinker)
- 閾值:ROR>2且95%CI下限>1
- 頻率:每日自動執行

**相似度模型:**
- 編碼:Sentence-BERT嵌入
- 相似度:餘弦相似度
- 索引:FAISS快速檢索
- Top-K:返回前10個

#### 4.5.3 資料整合

**資料來源:**
- 內部:TUDID不良事件資料庫
- 外部:FDA MAUDE、WHO VigiBase(API)
- 文獻:PubMed案例報告(選配)

**資料前處理:**
- 去識別化:移除患者可識別資訊
- 標準化:MedDRA術語映射
- 擴增:同義詞擴展
- 平衡:過採樣罕見事件

#### 4.5.4 視覺化分析

**儀表板元件:**
- 時間趨勢:事件發生率隨時間變化
- 器材排行:高風險器材Top 20
- 地理分布:熱力圖(去識別化)
- 患者人口統計:年齡、性別分布
- 嚴重度分布:死亡、傷害、故障比例

**互動功能:**
- 鑽取:點擊器材查看詳細報告
- 過濾:時間、地區、嚴重度篩選
- 匯出:報告PDF、資料Excel
- 訂閱:高風險信號自動通知

#### 4.5.5 部署規格

**Hugging Face版本:**
- 輸入:單一事件描述
- 輸出:可能關聯器材與理由
- 限制:無大規模信號偵測
- 展示:因果路徑視覺化

**AWS版本:**
- RDS:事件資料庫(去識別化)
- OpenSearch:全文檢索與分析
- SageMaker:NLP與因果模型
- QuickSight:BI儀表板
- Lambda:定時信號偵測
- SNS:高風險告警

**混合雲版本:**
- 地端:敏感事件資料(原始)
- 雲端:去識別化資料分析
- 匿名化:地端前處理後傳雲端
- 結果:雲端分析結果回傳地端
- 審核:地端人工審核介面

---

### 4.6 案例7:產品回收追蹤管理

#### 4.6.1 功能規格

**回收啟動:**
- 觸發條件:不良事件達閾值、製造缺陷、法規要求
- 回收範圍:
  - 批次回收:特定批號
  - 序號回收:特定序號範圍
  - 全面回收:所有該產品
- 緊急程度:Class I(高風險)、Class II(中)、Class III(低)

**受影響方識別:**
- 分銷商:追蹤供應鏈
- 醫療機構:已購買/使用機構
- 患者:植入式器材患者(去識別化通知)
- 海外:出口產品追蹤

**通知機制:**
- 多通道:Email、SMS、App推送、公文
- 範本:預定義通知範本
- 客製化:機構特定資訊
- 送達確認:讀取回條、回覆統計
- 升級:未回應自動升級通知

**回收追蹤:**
- 狀態管理:待通知→已通知→已確認→已回收→已銷毀
- 進度儀表板:即時統計
- 逾期提醒:未回應自動提醒
- 批次更新:Excel匯入更新狀態
- 稽核追蹤:完整操作記錄

**效果評估:**
- 回收率:已回收/總數
- 回應速度:通知到確認平均時間
- 剩餘風險:未回收數量與分布
- 報告生成:法規要求報告格式

#### 4.6.2 技術元件

**追蹤資料庫:**
- 資料模型:
  - 回收案件表
  - 受影響產品表(批號/序號)
  - 通知對象表
  - 回應記錄表
- 關聯:產品→分銷鏈→機構→患者
- 查詢優化:批號索引、日期索引

**通知服務:**
- Email:AWS SES或SendGrid
  - 大量發送:>10,000封
  - 追蹤:開信率、點擊率
- SMS:Twilio或AWS SNS
  - 國際支援:多國號碼
  - 緊急:Class I立即發送
- App推送:Firebase Cloud Messaging
  - 目標:醫療機構App使用者
  - 靜默推送:背景更新庫存狀態

**工作流引擎:**
- 框架:Camunda或AWS Step Functions
- 流程:
  ```
  啟動回收 → 範圍確認 → 生成通知清單 → 批次發送
      ↓
  追蹤回應 → 逾期提醒 → 升級通知 → 人工介入
      ↓
  回收確認 → 銷毀驗證 → 結案報告 → 歸檔
  ```
- 定時任務:每日回收進度報告

**報表生成:**
- 範本:法規要求格式(TFDA、FDA)
- 資料:自動從資料庫提取
- 格式:PDF、Word
- 簽核:電子簽章整合

#### 4.6.3 整合介面

**ERP/SCM整合:**
- 目的:追蹤產品流向
- 協定:REST API或EDI
- 資料:訂單、出貨、庫存
- 頻率:每日同步或即時

**HIS整合(醫療機構):**
- 目的:識別使用患者
- 標準:HL7 FHIR Device資源
- 資料:植入記錄、使用記錄
- 隱私:去識別化處理

**法規系統:**
- TFDA通報:自動產生通報文件
- 電子公文:與公文系統整合
- 國際通報:WHO、FDA(如適用)

#### 4.6.4 部署規格

**Hugging Face版本:**
- 模擬:展示回收流程
- 通知:Email範本預覽
- 追蹤:簡化狀態圖
- 限制:無真實發送功能

**AWS版本:**
- DynamoDB:追蹤資料(高寫入)
- SES+SNS:通知發送
- Step Functions:回收工作流
- EventBridge:定時任務觸發
- Lambda:業務邏輯
- S3:附件與報告儲存

**混合雲版本:**
- 地端:回收案件管理(敏感)
- 雲端:通知發送(穩定)
- 同步:受影響清單同步至雲端
- 追蹤:雲端記錄回應,同步回地端
- 備援:地端通知系統備援

---

### 4.7 案例8:電子化使用說明書(eIFU)

#### 4.7.1 功能規格

**內容管理:**
- 多版本:同產品不同版本說明書
- 多語言:繁中、英、日等(自動或人工翻譯)
- 多格式:HTML5、PDF、影片、互動式3D
- 版本控制:變更追蹤、審核批准
- 模組化:共用章節、客製化章節

**存取方式:**
- QR Code掃描:包裝或產品上
- NFC標籤:近場通訊快速連結
- UDI查詢:輸入UDI直接查詢
- 產品目錄:瀏覽式查詢
- 搜尋:全文檢索關鍵字

**使用者體驗:**
- 響應式設計:手機、平板、桌機
- 離線支援:PWA技術快取
- 列印友善:PDF格式可下載
- 無障礙:螢幕閱讀器、字體調整
- 導航:目錄、麵包屑、錨點跳轉

**進階功能:**
- 個人化:使用者收藏、筆記
- 互動式:風險評估問卷、使用教學
- 多媒體:操作影片、3D組裝動畫
- 通知:產品更新、安全警示推送
- 回饋:使用者評分、問題回報

**追蹤分析:**
- 使用統計:瀏覽次數、時長、熱門章節
- 裝置分析:裝置類型、OS版本
- 地理分布:存取來源國家(去識別化)
- 搜尋關鍵字:使用者關注點
- 轉換率:掃碼到閱讀率

#### 4.7.2 技術架構

**前端:**
- 框架:React + Next.js(SSR/SSG)
- PWA:Workbox Service Worker
- 狀態管理:Redux
- UI庫:Material-UI
- 離線儲存:IndexedDB

**後端API:**
- 框架:Node.js + Express或FastAPI
- 認證:JWT(選配使用者登入)
- API:
  - GET /eifu/{udi}:獲取說明書
  - GET /eifu/search?q=:搜尋
  - POST /eifu/analytics:追蹤事件
- 快取:CDN邊緣快取

**內容管理系統(CMS):**
- 選項:Strapi、WordPress(Headless)或自建
- 功能:
  - 版本管理
  - 審核工作流
  - 多語言支援
  - 媒體庫管理
- 角色:編輯者、審核者、發布者

**搜尋引擎:**
- Elasticsearch或Algolia
- 索引:全文、標題、關鍵字
- 功能:自動完成、模糊搜尋
- 速度:<100ms

#### 4.7.3 內容生成

**AI輔助翻譯:**
- 機器翻譯:Google Translate API、AWS Translate
- 後編輯:人工校對專業術語
- 術語庫:一致性術語翻譯
- 品質控制:BLEU分數>0.6
